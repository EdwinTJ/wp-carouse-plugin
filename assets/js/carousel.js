(function(){"use strict";class n{constructor(){this.events={}}on(t,s){this.events[t]||(this.events[t]=[]),this.events[t].push(s)}emit(t,s){this.events[t]&&this.events[t].forEach(e=>e(s))}}class h{constructor(t){this.carousel=t}use(t){new t(this.carousel)}}class a{constructor(t,s={}){this.root=t,this.track=t.querySelector(".pf-track"),this.slides=Array.from(t.querySelectorAll(".pf-slide")),this.config={slidesToShow:1,loop:!1,speed:400,breakpoints:{},modules:[],...s},this.index=0,this.events=new n,this.modules=new h(this),this.prevButton=t.querySelector(".pf-prev"),this.nextButton=t.querySelector(".pf-next"),this.setup(),this.attachModules()}setup(){this.updateSlidesToShow(),this.updateDimensions(),this.attachControls(),window.addEventListener("resize",()=>{this.updateSlidesToShow(),this.updateDimensions()})}updateSlidesToShow(){const t=window.innerWidth,s=this.config.breakpoints;let e=this.config.slidesToShow;Object.keys(s).forEach(o=>{t<=o&&(e=s[o].slidesToShow)}),this.currentSlidesToShow=e}updateDimensions(){const t=this.root.clientWidth/this.currentSlidesToShow;this.slides.forEach(s=>{s.style.width=`${t}px`}),this.moveTo(this.index,!1)}moveTo(t,s=!0){this.config.loop||(t=Math.max(0,Math.min(t,this.slides.length-this.currentSlidesToShow))),this.index=t;const e=-(t*this.slides[0].clientWidth);this.track.style.transition=s?`transform ${this.config.speed}ms ease`:"none",this.track.style.transform=`translate3d(${e}px, 0, 0)`,this.events.emit("slideChange",{index:t})}next(){this.moveTo(this.index+1)}prev(){this.moveTo(this.index-1)}attachModules(){this.config.modules.forEach(t=>{this.modules.use(t)})}attachControls(){this.nextButton&&this.nextButton.addEventListener("click",()=>{this.next()}),this.prevButton&&this.prevButton.addEventListener("click",()=>{this.prev()})}}class r{constructor(t){this.carousel=t,this.interval=null,this.delay=t.config.autoplayDelay||3e3,this.start(),this.attachHoverPause()}start(){this.stop(),this.interval=setInterval(()=>{this.carousel.next()},this.delay)}stop(){this.interval&&(clearInterval(this.interval),this.interval=null)}attachHoverPause(){this.carousel.root.addEventListener("mouseenter",()=>{this.stop()}),this.carousel.root.addEventListener("mouseleave",()=>{this.start()})}}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".pf-carousel").forEach(i=>{let t={};const s=i.getAttribute("data-config");if(s)try{t=JSON.parse(s)}catch{console.warn("Invalid JSON in data-config")}t.modules=t.modules||[],t.autoplay&&t.modules.push(r),new a(i,t)})})})();
